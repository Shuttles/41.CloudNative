# 1.背景

1. Kubernetes 的优势就在于：从设计之初就**以统一的方式定义任务之间的各种关系**， 并且为将来支持更多种类的关系留有余地，能够按照用户的意愿和整个系统的规则，完全自动化地处理好容器之间的各种关系，这个过程也就是**编排**。而其他很多集群管理项目（比如 Yarn、Mesos，以及 Swarm）擅长的，把一个容器按规则，放置在某个最佳节点上运行的功能则称为**调度**。
2. 容器本质是**进程**，那 Kubernetes 作为具有普遍意义的容器编排工具，就是**云操作系统**，TCOS 是星环为大数据分析平台量身定做的容器云操作系统，除了保持与开源社区的同步外，对容器平台的能力进行了更丰富的扩展，可以为上层大数据业务容器化运行以及应用云端化提供关键保障。



# 2.基础概念

## 2.1K8s概述

### 1.设计理念

1. 理解 Kubernetes 设计理念是学习 Kubernetes 的前提。我们需要聚焦在两个问题：

   - **如何处理应用与应用之间的关系？**
   - **如何恰当的容器化一个应用？**

2. 第一个问题，应用与应用之间的关系可以细化为容器间的关系，具体来说是两类：**一类关系是 “紧密交互” 的**，即：这些应用之间需要频繁交互、访问，或者会直接通过本地文件进行信息交换。Kubernetes 把这类关系涉及到的一组容器划分为一个 **“ <u>Pod</u> ”**（ Kuberntes 最小调度单位，后文详述），在这里面可以进行高效信息交换。

   **另一类关系则是常见的应用间的普通访问**，Kuberntes 通过定义 “<u>**服务对象**</u>” 来描述。比如 web 应用和数据库应用的交互，涉及到固定 IP 地址和端口以负载均衡的方式访问，就产生了 Service 对象来处理；加密授权的关系需求，则可由 Secret 对象解决等等。

3. 第二个问题，以 Pod 为基础为解决不同的场景需求衍生出了不同的解决方案，也就是**基于 Pod 改进后的对象资源，称为 “编排对象”**。比如被称为 DaemonSet 的对象资源，它可以像守护进程一样在每个宿主机上有且只能有一个pod副本；再比如 CronJob ，它专门用来描述定时任务等等。

4. 如下图所示，由 “Pod” 产生各类 “**编排对象**”，再为解决各种关系问题产生了类似Service、Ingress 等 “**服务对象** ”。

   ![img](https://qqadapt.qpic.cn/txdocpic/0/7378f19e739f0f6d9494ac8facd918fc/0?w=1920&h=1080)

5. 至此，总结下 Kubernetes 的通用使用方法：

   - 通过 “**编排对象**”，比如上文提到的 Pod、DaemonSet、Job 等来**描述被管理的应用**；
   - 定义一些 “**服务对象**”，比如 Service、Secret 等来**模拟平台对 “编排对象” 的管理**。

   以上提到的两种对象被称为 **API 对象（ API Object ）**，这种使用方法被称为 **“声明式 API ”**：**我们只需要描述我们期望达到的状态，而无需去在意具体的实现过程**。Kubernetes 里通常是用 YAML 文件来实现的，可以联想下最常见的声明式例子：SQL 来帮助理解 。



### 2.K8s架构



## 2.Pod





# 3.常用资源对象